Demo with PVS2C-generated Code  
==============================

This demo shows how to use PVS2C-generated codes in the step function. 
The `src` directory contains the code generated by PVS2C from the `*.pvs` files formalizing AES encryption/decryption with a proof of the invertibility of AES.
The PVS files are included for reference, but they would require the "strings" branch of the development version of PVS from https://github.com/SRI-CSL/pvs as well as the NASA PVSLib library from https://github.com/nasa/pvslib.
The `.c` and `.h` files generated from the PVS prelude theories and the ones in the directory.
The C files depend on the GMP library being available as well as standard libraries such as
stdio, stdlib, inttypes, stdbool, stdarg, string, fcntl, math, sys/mman, sys/stat.h, and sys/types.

::

  sudo apt-get install libgmp3-dev
  cd /parh/to/radler/examples/pvs/src
  cc -O3 -Wall -shared -o libRijndael.so pvslib.c finite_sequences_c.c integer_bv_ops_c.c bv_c.c bit_c.c file_c.c bytestrings_c.c gen_strings_c.c strings_c.c ordinals_c.c ordstruct_adt_c.c integertypes_c.c exp2_c.c euclidean_division_c.c real_defs_c.c Rijndael_c.c bytevectors_c.c hex_c.c simplifications_c.c Rijndael_m.c -lgmp -fPIC
  sudo mv libRijndael.so /usr/lib/x86_64-linux-gnu/

To compile and execute:

::
  
  cd /path/to/radler   
  ./radler.sh  --ws_dir /tmp/ros2_ws/src compile examples/pvs/aes.radl --plant plant --ROS
  cd /tmp/ros2_ws
  colcon build
  source source install/setup.bash
  ./install/aes/bin/Rijndael
  ./install/aes/bin/Consumer

To test the generated C code at a shell (Refer `src/README` for the sample run.):

:: 

  cd /parh/to/radler/examples/pvs/src
  cc -O3 -Wall -o Rijndael pvslib.c finite_sequences_c.c integer_bv_ops_c.c bv_c.c bit_c.c file_c.c bytestrings_c.c gen_strings_c.c strings_c.c ordinals_c.c ordstruct_adt_c.c integertypes_c.c exp2_c.c euclidean_division_c.c real_defs_c.c Rijndael_c.c bytevectors_c.c hex_c.c simplifications_c.c Rijndael_m.c -lgmp

